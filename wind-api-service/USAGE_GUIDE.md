# Wind API + FastGPT 使用指南

## ✅ 系统状态

当前所有服务都已启动并运行正常：

- **Wind API 服务**: ✅ http://localhost:8080
- **FastGPT 应用**: ✅ http://localhost:3001
- **Wind 连接状态**: ✅ 已连接到真实 Wind 终端

## 🎯 如何在 FastGPT 中使用 Wind 节点

### 1. 进入工作流编辑器

1. 打开浏览器访问: http://localhost:3001
2. 使用账号密码登录（用户名: root, 密码: 123456）
3. 点击 "新建应用" 或编辑现有应用
4. 点击 "高级编排" 进入工作流编辑器

### 2. 添加 Wind 节点

在工作流编辑器中：

1. **方法一：从节点列表添加**
   - 点击左侧的 "+" 按钮打开节点列表
   - 在 "金融" 分类下找到:
     - **Wind数据获取** - 获取金融数据
     - **Wind智能分析** - 分析金融数据

2. **方法二：右键添加**
   - 在画布空白处右键
   - 选择 "添加节点"
   - 搜索 "Wind"

### 3. 配置 Wind 数据节点

Wind 数据节点的配置选项：

- **数据类型**: 选择股票/债券/基金
- **证券代码**: 
  - 可以手动输入（如 600519.SH）
  - 或连接到用户输入节点自动提取
- **指标字段**: 
  - 留空会自动推断
  - 或指定如: close,pe_ttm,volume
- **日期范围**: 可选，留空获取最新数据

### 4. 创建完整的金融分析工作流

推荐的工作流结构：

```
[用户输入] → [Wind数据获取] → [Wind智能分析] → [回复输出]
                    ↓
               [AI对话节点]
```

### 5. 测试工作流

点击右上角的 "测试" 按钮，输入测试问题：

- "分析贵州茅台的投资价值"
- "600519.SH 的基本面如何？"
- "比较平安银行和招商银行"

## 📊 示例配置

### 示例1：简单股票查询

1. 添加 "工作流开始" 节点
2. 添加 "Wind数据获取" 节点
   - 数据类型: stock
   - 证券代码: {{用户输入自动提取}}
   - 指标: close,pe_ttm,pb_lf,volume
3. 添加 "指定回复" 节点，显示数据

### 示例2：智能金融分析

1. 添加 "工作流开始" 节点
2. 添加 "Wind数据获取" 节点
3. 添加 "AI对话" 节点
   - 系统提示词: "你是专业的金融分析师，基于Wind数据进行分析"
   - 用户输入: {{Wind格式化数据}}
4. 添加 "指定回复" 节点

## 🔍 验证 Wind 节点是否工作

1. **检查节点是否出现**：
   - 在节点列表的 "金融" 分类下应该能看到 Wind 节点

2. **测试数据获取**：
   - 创建简单工作流
   - 使用 Wind数据获取节点
   - 输入股票代码如 "600519.SH"
   - 应该返回真实股票数据

3. **查看日志**：
   - Wind API 服务日志: `wind-api-service/wind_api.log`
   - FastGPT 控制台会显示 Wind API 调用信息

## ❓ 常见问题

### Q: 找不到 Wind 节点？

A: 确保以下步骤已完成：
1. FastGPT 已重启
2. 访问正确的端口 (3001)
3. 刷新浏览器缓存 (Ctrl+F5)
4. 在节点列表的 "金融" 分类下查找

### Q: Wind 数据获取失败？

A: 检查：
1. Wind API 服务是否运行 (http://localhost:8080)
2. Wind 终端是否已登录
3. 股票代码格式是否正确 (如 600519.SH)

### Q: 如何查看获取的原始数据？

A: 在 Wind数据获取节点的输出中：
- `原始数据` - 完整的 API 响应
- `格式化数据` - 人类可读的文本描述
- `数据摘要` - 结构化的数据对象

## 🚀 进阶用法

### 批量股票分析

在 Wind数据获取节点的证券代码字段输入多个代码：
```
600519.SH,000858.SZ,000001.SZ
```

### 自定义分析模板

在 AI对话节点的系统提示词中定制分析框架：
```
基于Wind数据，从以下维度分析：
1. 估值水平（PE、PB）
2. 成长性（营收、利润增长）
3. 财务健康度（ROE、资产负债率）
4. 技术面（价格趋势、成交量）
给出明确的投资建议和风险提示。
```

## 📞 需要帮助？

- 查看完整文档: `/docs/wind-api-integration.md`
- 运行测试脚本: `./test_integration.sh`
- 查看示例工作流: `/examples/wind-financial-analysis-workflow.json`
# Wind 节点配置说明

## ⚠️ 重要提示

Wind API **必须**提供有效的证券代码才能获取数据。如果没有证券代码，调用会失败。

## 📋 正确配置方式

### 方式1：手动指定证券代码（推荐）

在 Wind数据获取节点中：
- **证券代码**：直接输入，如 `600519.SH` 或 `600519.SH,000858.SZ,000001.SZ`
- **指标字段**：`close,pe_ttm,pb_lf,volume`

### 方式2：自动提取证券代码

将用户输入连接到证券代码字段：
- **证券代码**：`{{用户问题}}`（连接到工作流开始节点的用户输入）
- **指标字段**：留空或指定

**注意**：用户输入必须包含可识别的股票代码，如：
- ✅ "分析600519.SH的基本面"
- ✅ "贵州茅台600519的投资价值"
- ❌ "分析茅台的基本面"（无法识别代码）

### 方式3：使用变量传递

如果前面有节点输出了证券代码：
- **证券代码**：`{{节点ID.输出字段}}`

## 🔧 常见配置示例

### 示例1：单只股票分析
```yaml
证券代码: 600519.SH
指标字段: close,pe_ttm,pb_lf,volume,mkt_cap_ard
数据类型: stock
```

### 示例2：多只股票对比
```yaml
证券代码: 600519.SH,000858.SZ,000001.SZ
指标字段: close,pe_ttm,roe_ttm
数据类型: stock
```

### 示例3：动态提取（需要用户输入包含代码）
```yaml
证券代码: {{用户问题}}
指标字段: （留空，自动推断）
数据类型: stock
```

## ❌ 错误案例

以下配置会导致错误：

1. **没有证券代码**
   ```yaml
   证券代码: （空）
   指标字段: close,pe_ttm
   ```
   错误：`万得代码语法错误`

2. **错误的代码格式**
   ```yaml
   证券代码: 茅台
   ```
   错误：无法识别的证券代码

3. **代码格式不完整**
   ```yaml
   证券代码: 600519  # 缺少市场后缀
   ```
   建议改为：`600519.SH`

## 📝 股票代码格式

### A股代码格式
- 上海市场：`6XXXXX.SH`（如 600519.SH）
- 深圳市场：`0XXXXX.SZ` 或 `3XXXXX.SZ`（如 000001.SZ）
- 北京市场：`4XXXXX.BJ` 或 `8XXXXX.BJ`

### 其他市场
- 港股：`XXXXX.HK`（如 00700.HK）
- 美股：直接使用股票代码（如 AAPL）

## 🎯 最佳实践

1. **始终提供证券代码**
   - 手动输入最可靠
   - 自动提取需要确保输入包含代码

2. **合理选择指标**
   - 基础指标：`close,volume,pe_ttm,pb_lf`
   - 财务指标：`or_ttm,np_ttm,roe_ttm`
   - 估值指标：`pe_ttm,pb_lf,ps_ttm`

3. **错误处理**
   - 连接错误输出到后续节点
   - 添加条件判断处理失败情况

## 🔍 调试建议

如果遇到错误：

1. **检查证券代码**
   - 确保不为空
   - 格式正确（包含市场后缀）
   - 代码有效（存在的股票）

2. **查看节点输出**
   - 检查"错误"输出字段
   - 查看控制台日志

3. **测试简单案例**
   - 先用固定代码测试：`600519.SH`
   - 确认工作后再使用动态提取

## 📊 支持的指标列表

### 价格类
- `open` - 开盘价
- `high` - 最高价
- `low` - 最低价
- `close` - 收盘价
- `volume` - 成交量
- `amt` - 成交额

### 估值类
- `pe_ttm` - 市盈率(TTM)
- `pb_lf` - 市净率(LF)
- `ps_ttm` - 市销率(TTM)
- `pcf_ttm` - 市现率(TTM)

### 财务类
- `or_ttm` - 营业收入(TTM)
- `np_ttm` - 净利润(TTM)
- `roe_ttm` - ROE(TTM)
- `roa_ttm` - ROA(TTM)

### 市值类
- `mkt_cap_ard` - 总市值
- `float_a_shares` - 流通股本